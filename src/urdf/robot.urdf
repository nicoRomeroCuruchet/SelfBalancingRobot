<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from robot_new.xacro                | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="balancing">
  <link name="base_link">
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0010416666666666667" ixy="0.0" ixz="0.0" iyy="0.0006933333333333335" iyz="0.0" izz="0.0004016666666666667"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0"/>
      <geometry>
        <box size="0.04 0.15 0.2"/>
      </geometry>
    </visual>
	<collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <box size="0.04 0.15 0.2"/>
		</geometry> 
	</collision>
  </link>
  <gazebo reference="base_link">
    <mu1>0.3</mu1>
    <mu2>0.3</mu2>
    <kp>10000</kp>
    <kd>10000</kd>
    <material>Gazebo/White</material>
  </gazebo>
  <joint name="motor_dx_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.04 -0.1125"/>
    <parent link="base_link"/>
    <child link="motor_dx_link"/>
  </joint>
  <link name="motor_dx_link">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <inertia ixx="4.604166666666667e-05" ixy="0.0" ixz="0.0" iyy="4.604166666666667e-05" iyz="0.0" izz="7.812500000000002e-06"/>
    </inertial>
    <visual>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.07" radius="0.0125"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.07" radius="0.0125"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="motor_dx_link">
    <mu1>0.7</mu1>
    <mu2>0.7</mu2>
    <kp>10000</kp>
    <kd>10000</kd>
    <material>Gazebo/Gray</material>
  </gazebo>
  <joint name="wheel_dx_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0 0.05 0"/>
    <parent link="motor_dx_link"/>
    <child link="wheel_dx_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="wheel_dx_link">
    <inertial>
      <mass value="0.05"/>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <inertia ixx="2.0641666666666666e-05" ixy="0.0" ixz="0.0" iyy="2.0641666666666666e-05" iyz="0.0" izz="2.6406250000000005e-05"/>
    </inertial>
    <visual>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.027" radius="0.0325"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.027" radius="0.0325"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="wheel_dx_link">
    <mu1>0.7</mu1>
    <mu2>0.7</mu2>
    <kp>10000</kp>
    <kd>10000</kd>
    <material>Gazebo/Black</material>
  </gazebo>
  <joint name="motor_sx_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 -0.04 -0.1125"/>
    <parent link="base_link"/>
    <child link="motor_sx_link"/>
  </joint>
  <link name="motor_sx_link">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <inertia ixx="4.604166666666667e-05" ixy="0.0" ixz="0.0" iyy="4.604166666666667e-05" iyz="0.0" izz="7.812500000000002e-06"/>
    </inertial>
    <visual>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.07" radius="0.0125"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.07" radius="0.0125"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="motor_sx_link">
    <mu1>0.7</mu1>
    <mu2>0.7</mu2>
    <kp>10000</kp>
    <kd>10000</kd>
    <material>Gazebo/Gray</material>
  </gazebo>
  <joint name="wheel_sx_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0 -0.05 0"/>
    <parent link="motor_sx_link"/>
    <child link="wheel_sx_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="wheel_sx_link">
    <inertial>
      <mass value="0.05"/>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <inertia ixx="2.0641666666666666e-05" ixy="0.0" ixz="0.0" iyy="2.0641666666666666e-05" iyz="0.0" izz="2.6406250000000005e-05"/>
    </inertial>
    <visual>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.027" radius="0.0325"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57075 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.027" radius="0.0325"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="wheel_sx_link">
    <mu1>0.7</mu1>
    <mu2>0.7</mu2>
    <kp>10000</kp>
    <kd>10000</kd>
    <material>Gazebo/Black</material>
  </gazebo>
  <link name="battery_link">
    <inertial>
      <mass value="0.15"/>
      <origin xyz="0 0 0.0"/>
      <inertia ixx="0.00011249999999999998" ixy="0.0" ixz="0.0" iyy="3.125e-05" iyz="0.0" izz="0.00012124999999999999"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0"/>
      <geometry>
        <box size="0.04 0.09 0.03"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <box size="0.04 0.09 0.03"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="battery_link">
    <mu1>0.3</mu1>
    <mu2>0.3</mu2>
    <kp>10000</kp>
    <kd>10000</kd>
    <material>Gazebo/Green</material>
  </gazebo>
  <joint name="battery_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.115"/>
    <parent link="base_link"/>
    <child link="battery_link"/>
  </joint>
  <!--  SENSORS -->
  
  <!-- DIFFERENTIAL DRIVE -->
  
  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="differential_drive_controller">
      <legacyMode>false</legacyMode>
	    <alwaysOn>true</alwaysOn>
	    <max_velocity>10</max_velocity>
      <updateRate>200</updateRate>
      <leftJoint>wheel_dx_joint</leftJoint>
      <rightJoint>wheel_sx_joint</rightJoint>
      <wheelSeparation>0.2</wheelSeparation>
      <wheelDiameter>0.065</wheelDiameter>
      <torque>20</torque>
      <commandTopic>self_balancing_robot/cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <odometrySource>2</odometrySource>
      <publishTf>false</publishTf>
      <param name="odometrySource" type="int" value="2"/>
      <robotBaseFrame>base_link</robotBaseFrame>
      <wheelTorque>4</wheelTorque>
      <wheelAcceleration>4</wheelAcceleration>
      <publishWheelJointState>true</publishWheelJointState>
      <publishOdomTF>true</publishOdomTF>
      <publishWheelTF>true</publishWheelTF>
      <rosDebugLevel>debug</rosDebugLevel>
    </plugin>
  </gazebo>

  <gazebo>
    <plugin name="p3d_base_controller" filename="libgazebo_ros_p3d.so">
      <alwaysOn>true</alwaysOn>
      <updateRate>200.0</updateRate>
      <bodyName>base_link</bodyName>
      <topicName>self_balancing_robot/ground_truth/state</topicName>
      <gaussianNoise>0.00</gaussianNoise>
      <frameName>world</frameName>
      <xyzOffsets>0 0 0</xyzOffsets>
      <rpyOffsets>0 0 0</rpyOffsets>
    </plugin>
  </gazebo>

</robot>

